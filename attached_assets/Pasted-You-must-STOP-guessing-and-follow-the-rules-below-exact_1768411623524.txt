You must STOP guessing and follow the rules below exactly.
Do NOT add features and do NOT redesign UI unless explicitly requested.
	1.	Concept of Periods
A Period is a strict accounting unit.
Every transaction must belong to exactly one period.
A transaction cannot exist without a period.
At any time there must be only ONE open period.
Never allow two open periods at the same time.
	2.	Initial State (First Run)
When the system runs for the first time:
Create ONE period only.
Name it: “الفترة الافتتاحية”.
status = “Open”.
start_date = NOW().
p1_balance_start = 0.
p2_balance_start = 0.
The user must NOT manually create periods at this stage.
	3.	Creating New Periods
There is NO “Add Period” button.
A new period is created ONLY when the current open period is closed.
	4.	Closing a Period
When the user clicks “Close Period”:

	•	Calculate final balances for each partner.
	•	Save results into p1_balance_end and p2_balance_end.
	•	Update the current period:
status = “Closed”.
end_date = NOW().
	•	If balances are NOT balanced (sum ≠ 0):
Reject closing and show an error.
Do NOT change period status.

	5.	Auto-Open Next Period
Immediately after closing a period:
Create a new period automatically with the same project_id.
Set:
status = “Open”.
start_date = NOW().
p1_balance_start = previous.p1_balance_end.
p2_balance_start = previous.p2_balance_end.
The user must NOT enter dates manually.
	6.	Relationship with Other Pages
Transactions Page:
Load transactions ONLY for the currently open period.
If the period is closed:
Do NOT allow add, edit, or delete.

Reports Page:
Reports must be generated for ONE selected period only.
REMOVE the “All Periods” option completely.

Period Selector:
Data source is the Periods table only.
Show one open period and closed periods as read-only.
The selector must behave the same across all pages.
	7.	UI Rules
Period start and end dates:
Must be set automatically by the system.
Must NOT be editable by the user.

Period balances:
Must be stored in the database.
Must be used as opening balances for the next period.
	8.	Strict Requirements
Do NOT create multiple open periods.
Do NOT allow manual date input.
Do NOT invent new logic.
Do NOT mix periods in calculations.
Apply the SAME logic on both client and server.
	9.	Goal
Clean accounting flow.
No period confusion.
Correct partner balances.
Stable and predictable reports.

If anything is unclear, ASK before coding.
Do NOT assume.
